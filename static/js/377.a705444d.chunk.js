"use strict";(self.webpackChunkcarot_shop=self.webpackChunkcarot_shop||[]).push([[377],{5377:function(e,n,r){r.r(n);var i=r(1413),t=r(5861),a=r(885),s=r(7757),u=r.n(s),l=r(4695),o=r(2791),c=r(1134),h=r(1933),d=r(6871),m=r(9085),p=r(7968),g=r(7870),f=r(6719),x=r(8825),v=r(2951),Z=r(2252),j=r(4930),y=r(5433),k=r(6579),_=r(6591),q=r(3934),V=r(951),C=r(184);n.default=function(){var e=(0,d.s0)(),n=(0,k.T)(),r=(0,o.useState)(!0),s=(0,a.Z)(r,2),b=s[0],N=s[1],w=(0,o.useState)(!1),I=(0,a.Z)(w,2),S=I[0],E=I[1],R=(0,k.C)((function(e){return e.auth.profile})),T=(0,c.cI)({resolver:(0,l.X)(V.dm)}),M=(0,h.useMutation)("syncToCartAction",Z.ov,{onSuccess:function(){localStorage.removeItem(_.g2.NICI_CART)},onSettled:function(){e(_.PW.HOME)}}),A=M.mutate,P=M.isLoading,Q=(0,h.useMutation)("loginAction",v.jW,{onSuccess:function(r){m.Am.success("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!",{toastId:"loginSuccess"}),(0,j.M8)(r.accessToken),(0,j.zI)(r.refreshToken),n((0,y.d2)());var i=localStorage.getItem(_.g2.NICI_CART),t=i?JSON.parse(i):[];t.length>0?A(t.map((function(e){return{productId:e.productId,sizeId:e.size.id,colorId:e.color.id,quantity:e.quantity}}))):e(_.PW.HOME)},onError:function(e){e.length>0?e.forEach((function(e){T.setError("password",{message:_.NR[e.message]||"Th\xf4ng tin ch\u01b0a \u0111\xfang"})})):m.Am.error("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!",{toastId:"loginFail"})}}),z=Q.mutate,L=Q.isLoading,F=function(){var e=(0,t.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=(0,t.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.trigger();case 2:e.sent&&(n=T.getValues(),z(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=(0,c.cI)({resolver:(0,l.X)(V.gY)}),W=(0,h.useMutation)("registerAction",v.gM,{onSuccess:function(){E(!0)},onError:function(e){e.length>0?e.forEach((function(e){O.setError(e.field,{message:_.NR[e.message]})})):m.Am.error("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!",{toastId:"registerFail"})}}),X=W.mutate,D=W.isLoading,J=(0,h.useMutation)("verifyEmailAction",v.cn,{onSuccess:function(){m.Am.success("Ch\xfac m\u1eebng b\u1ea1n \u0111\xe3 \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n th\xe0nh c\xf4ng!",{toastId:"verifySuccess"}),E(!1),N(!0)},onError:function(e){e.length>0?e.forEach((function(e){O.setError(e.field,{message:_.NR[e.message]||"Th\xf4ng tin ch\u01b0a \u0111\xfang"})})):m.Am.error("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!",{toastId:"registerFail"})}}),K=J.mutate,Y=J.isLoading,G=(0,o.useCallback)(function(){var e=(0,t.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S?(n.verifyCode||O.setError("verifyCode",{message:"Vui l\xf2ng nh\u1eadp m\xe3 x\xe1c th\u1ef1c"}),K(n.verifyCode)):X(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[O,X,S,K]),B=function(){var e=(0,t.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.trigger();case 2:e.sent&&(n=O.getValues(),X(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){R&&e("/account")}),[e,R]),(0,C.jsx)(x.Z,{children:(0,C.jsxs)("div",{className:"p-authenticate",children:[(0,C.jsxs)("div",{className:"p-authenticate_tabs",children:[(0,C.jsx)("div",{className:(0,q.ZP)("p-authenticate_btnLogin",b&&"active"),children:(0,C.jsx)(p.Z,{handleClick:function(){return N(!0)},children:(0,C.jsx)(f.Z.Text,{modifiers:["18x21","700","uppercase"],children:"\u0110\u0103ng nh\u1eadp"})})}),(0,C.jsx)("div",{className:(0,q.ZP)("p-authenticate_btnRegister",!b&&"active"),children:(0,C.jsx)(p.Z,{handleClick:function(){return N(!1)},children:(0,C.jsx)(f.Z.Text,{modifiers:["18x21","700","uppercase"],children:"\u0110\u0103ng k\xfd"})})})]}),(0,C.jsxs)("div",{className:"p-authenticate_content",children:[(0,C.jsx)("div",{className:(0,q.ZP)("p-authenticate_login",b&&"active"),children:(0,C.jsxs)(c.RV,(0,i.Z)((0,i.Z)({},T),{},{children:[(0,C.jsx)("div",{className:"p-authenticate_field",children:(0,C.jsx)(c.Qr,{name:"email",control:T.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{name:"email",required:!0,label:"Email",type:"text",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message})}})}),(0,C.jsx)("div",{className:"p-authenticate_field",children:(0,C.jsx)(c.Qr,{name:"password",control:T.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{name:"password",required:!0,label:"M\u1eadt kh\u1ea9u",type:"password",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message,onKeyDown:function(e){"Enter"===e.key&&H()}})}})}),(0,C.jsx)("div",{className:"p-authenticate_button",children:(0,C.jsx)(p.Z,{type:"submit",variant:"primary",loading:L||P,sizes:"h42",handleClick:T.handleSubmit(F),children:(0,C.jsx)(f.Z.Text,{modifiers:["15x18","500","uppercase"],children:"\u0110\u0103ng nh\u1eadp"})})})]}))}),(0,C.jsx)("div",{className:(0,q.ZP)("p-authenticate_register",!b&&"active"),children:(0,C.jsxs)(c.RV,(0,i.Z)((0,i.Z)({},O),{},{children:[S?(0,C.jsxs)("div",{className:"p-authenticate_field",children:[(0,C.jsx)("div",{className:"p-authenticate_message",children:(0,C.jsxs)(f.Z.Text,{modifiers:["12x14","cadetGrey","center"],children:["Ch\xfang t\xf4i \u0111\xe3 g\u1eedi m\u1ed9t m\xe3 x\xe1c th\u1ef1c \u0111\u1ebfn Email:"," ",(0,C.jsx)(f.Z.Text,{type:"span",modifiers:["ferrariRed","500"],children:O.getValues("email")}),(0,C.jsx)("br",{}),"Vui l\xf2ng nh\u1eadp m\xe3 x\xe1c th\u1ef1c \u0111\u1ec3 k\xedch ho\u1ea1t t\xe0i kho\u1ea3n."]})}),(0,C.jsx)(c.Qr,{name:"verifyCode",control:O.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{prefix:"NICI-",required:!0,label:"M\xe3 x\xe1c th\u1ef1c",type:"text",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message})}})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"p-authenticate_field",children:(0,C.jsx)(c.Qr,{name:"fullName",control:O.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{name:"fullName",required:!0,label:"H\u1ecd v\xe0 t\xean",type:"text",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message})}})}),(0,C.jsx)("div",{className:"p-authenticate_field",children:(0,C.jsx)(c.Qr,{name:"phone",control:O.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{name:"phone",required:!0,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",type:"text",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message})}})}),(0,C.jsx)("div",{className:"p-authenticate_field",children:(0,C.jsx)(c.Qr,{name:"email",control:O.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{name:"email",required:!0,label:"Email",type:"text",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message})}})}),(0,C.jsx)("div",{className:"p-authenticate_field",children:(0,C.jsx)(c.Qr,{name:"password",control:O.control,render:function(e){var n=e.field,r=n.onChange,i=n.value,t=e.fieldState.error;return(0,C.jsx)(g.Z,{name:"password",required:!0,label:"M\u1eadt kh\u1ea9u",type:"password",value:i,bordered:!0,onChange:r,error:null===t||void 0===t?void 0:t.message,onKeyDown:function(e){"Enter"===e.key&&B()}})}})})]}),(0,C.jsx)("div",{className:"p-authenticate_button",children:(0,C.jsx)(p.Z,{type:"submit",loading:D||Y,variant:"primary",sizes:"h42",handleClick:O.handleSubmit(G),children:(0,C.jsx)(f.Z.Text,{modifiers:["15x18","500","uppercase"],children:S?"X\xe1c th\u1ef1c":"\u0110\u0103ng k\xfd"})})})]}))})]})]})})}},951:function(e,n,r){r.d(n,{IT:function(){return c},Jg:function(){return o},b8:function(){return h},dm:function(){return a},gY:function(){return s},oT:function(){return d},tV:function(){return u},yC:function(){return l}});var i=r(8750),t=/(84|0[3|5|7|8|9])+([0-9]{8})\b/,a=i.Ry({email:i.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7"),password:i.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u")}),s=i.Ry({fullName:i.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),phone:i.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(t,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),email:i.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7"),password:i.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u").min(6,"M\u1eadt kh\u1ea9u ph\u1ea3i ch\u1ee9a \xedt nh\u1ea5t 6 k\xed t\u1ef1")}),u=i.Ry({phone:i.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(t,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),address:i.Z_().required("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9"),name:i.Z_().required("Vui l\xf2ng nh\u1eadp t\xean"),cityId:i.Rx().required("Vui l\xf2ng ch\u1ecdn t\u1ec9nh / th\xe0nh ph\u1ed1"),districtId:i.Rx().required("Vui l\xf2ng ch\u1ecdn qu\u1eadn / huy\u1ec7n"),wardId:i.Rx().required("Vui l\xf2ng ch\u1ecdn ph\u01b0\u1eddng / x\xe3")}),l=i.Ry({fullName:i.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),phone:i.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(t,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7")}),o=i.Ry({oldPassword:i.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"),password:i.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"),confirmPassword:i.Z_().required("Vui l\xf2ng nh\u1eadp x\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi").oneOf([i.iH("password")],"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng tr\xf9ng kh\u1edbp")}),c=i.Ry({cityId:i.Rx().required("Vui l\xf2ng ch\u1ecdn t\u1ec9nh / th\xe0nh ph\u1ed1"),districtId:i.Rx().required("Vui l\xf2ng ch\u1ecdn qu\u1eadn / huy\u1ec7n"),wardId:i.Rx().required("Vui l\xf2ng ch\u1ecdn ph\u01b0\u1eddng / x\xe3"),address:i.Z_().required("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9"),name:i.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean"),phone:i.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(t,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),email:i.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7")}),h=i.Ry({fullname:i.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),phone:i.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(t,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),email:i.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7")}),d=i.Ry({name:i.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),email:i.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7"),subject:i.Z_().required("Vui l\xf2ng nh\u1eadp ch\u1ee7 \u0111\u1ec3"),message:i.Z_().required("Vui l\xf2ng \u0111\u1ec3 l\u1ea1i l\u1eddi nh\u1eafn")})}}]);
//# sourceMappingURL=377.a705444d.chunk.js.map