"use strict";(self.webpackChunkcarot_shop=self.webpackChunkcarot_shop||[]).push([[790],{2228:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(885),i=r(2791),a=r(6719),u=function(e,n){var r=function(r){e.current&&!e.current.contains(r.target||null)&&n(r)};(0,i.useEffect)((function(){return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}}),[e,n])},c=r(3934),s=r(184),o=function(e){var n=e.modifier,r=e.label,o=e.required,l=e.name,d=e.placeholder,h=e.value,p=e.options,f=e.isSearch,m=e.handleSelect,v=e.error,x=(0,i.useRef)(null),g=(0,i.useState)([]),Z=(0,t.Z)(g,2),j=Z[0],_=Z[1],k=(0,i.useState)(!1),w=(0,t.Z)(k,2),y=w[0],q=w[1],S=(0,i.useState)(""),V=(0,t.Z)(S,2),b=V[0],N=V[1];return u(x,(function(){y&&q(!1)})),(0,i.useEffect)((function(){_(b?j.filter((function(e){return e.label.includes(b)})):p)}),[b]),(0,i.useEffect)((function(){_(p)}),[p]),(0,s.jsxs)("div",{className:(0,c.ZP)("a-select",n),ref:x,children:[r&&(0,s.jsxs)("label",{className:"a-select_label",children:[(0,s.jsx)(a.Z.Text,{type:"span",modifiers:["14x16"],children:r}),o&&(0,s.jsx)(a.Z.Text,{type:"span",modifiers:["14x16","ferrariRed"],children:" *"})]}),(0,s.jsxs)("div",{className:"a-select_header",onClick:function(){return q(!y)},children:[!b&&(0,s.jsx)("div",{className:"a-select_header_content".concat(h?"":" placeholder"),children:(0,s.jsx)("span",{children:h?h.label:d})}),f&&(0,s.jsx)("input",{name:l,className:"a-select_search",value:b,onChange:function(e){return N(e.currentTarget.value)}}),(0,s.jsx)("span",{className:y?"a-select_arrow opened":"a-select_arrow"})]}),v&&(0,s.jsx)("div",{className:"a-select_error",children:v}),y&&(0,s.jsx)("div",{className:"a-select_wrapper",children:(0,s.jsx)("ul",{className:"a-select_list",children:j.length?j.map((function(e){return(0,s.jsx)("li",{className:"a-select_item",onClick:function(){m&&(m(e),N(""),q(!1))},children:e.label},e.value)})):(0,s.jsx)("li",{className:"a-select_item none",children:"No Option"})})})]})}},919:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(885),i=r(1413),a=r(4695),u=r(2791),c=r(1134),s=r(1933),o=r(9085),l=r(7968),d=r(7870),h=r(699),p=r(2228),f=r(6719),m=r(2267),v=r(730),x=r(5861),g=r(7757),Z=r.n(g),j=r(1424),_=function(){var e=(0,x.Z)(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.get("customers/shipping-address");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,x.Z)(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.post("customers/shipping-address",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=(0,x.Z)(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.put("customers/shipping-address/".concat(n.id),n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,x.Z)(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.delete("customers/shipping-address",{data:{ids:n}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q=r(6591),S=r(3934),V=r(951),b=r(184),N=function(e){var n=e.defaultValues,r=e.handleSuccess,t=e.handleCancel,h=(0,c.cI)({resolver:(0,a.X)(V.tV),defaultValues:n?{cityId:n.city.id,districtId:n.district.id,wardId:n.ward.id,name:n.name,phone:n.phone,address:n.address}:void 0}),x=h.watch("cityId"),g=h.watch("districtId"),Z=(0,s.useMutation)("getCitiesAction",(function(e){return(0,v.ZG)(e)})),j=Z.mutate,_=Z.data,y=(0,s.useMutation)("getDistrictsAction",(function(e){return(0,v.m)(e)})),S=y.mutate,N=y.data,C=(0,s.useMutation)("getWardsAction",(function(e){return(0,v.DA)(e)})),I=C.mutate,R=C.data,A=(0,s.useMutation)("createShippingAddressAction",k,{onSuccess:function(){r()},onError:function(e){e.length>0?e.forEach((function(e){h.setError(e.field,{message:q.NR[e.message]})})):o.Am.error("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!",{toastId:"createFail"})}}),E=A.mutate,T=A.isLoading,M=(0,s.useMutation)("editShippingAddressAction",w,{onSuccess:function(){r()},onError:function(e){e.length>0?e.forEach((function(e){h.setError(e.field,{message:q.NR[e.message]})})):o.Am.error("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!",{toastId:"createFail"})}}),Q=M.mutate,z=M.isLoading;return(0,m.Z)((function(){j(1)})),(0,u.useEffect)((function(){S(x)}),[S,h,x]),(0,u.useEffect)((function(){I(g)}),[I,h,g]),(0,b.jsxs)(c.RV,(0,i.Z)((0,i.Z)({},h),{},{children:[(0,b.jsx)("div",{className:"p-account_field",children:(0,b.jsx)(c.Qr,{name:"name",control:h.control,render:function(e){var n=e.field,r=n.onChange,t=n.value,i=e.fieldState.error;return(0,b.jsx)(d.Z,{name:"name",required:!0,label:"T\xean ng\u01b0\u1eddi nh\u1eadn",type:"text",value:t,bordered:!0,onChange:r,error:null===i||void 0===i?void 0:i.message})}})}),(0,b.jsx)("div",{className:"p-account_field",children:(0,b.jsx)(c.Qr,{name:"phone",control:h.control,render:function(e){var n=e.field,r=n.onChange,t=n.value,i=e.fieldState.error;return(0,b.jsx)(d.Z,{name:"phone",required:!0,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",type:"text",value:t,bordered:!0,onChange:r,error:null===i||void 0===i?void 0:i.message})}})}),(0,b.jsx)("div",{className:"p-account_field",children:(0,b.jsx)(c.Qr,{name:"cityId",control:h.control,render:function(e){var n=e.field,r=n.onChange,t=n.value,i=e.fieldState.error;return(0,b.jsx)(p.Z,{name:"cityId",placeholder:"---",label:"T\u1ec9nh / Th\xe0nh ph\u1ed1",options:_||[],modifier:["bordered"],required:!0,value:null===_||void 0===_?void 0:_.find((function(e){return e.value===t})),handleSelect:function(e){return r(e.value)},error:null===i||void 0===i?void 0:i.message})}})}),(0,b.jsx)("div",{className:"p-account_field",children:(0,b.jsx)(c.Qr,{name:"districtId",control:h.control,render:function(e){var n=e.field,r=n.onChange,t=n.value,i=e.fieldState.error;return(0,b.jsx)(p.Z,{name:"districtId",placeholder:"---",label:"Qu\u1eadn / Huy\u1ec7n",options:N||[],modifier:["bordered"],required:!0,value:null===N||void 0===N?void 0:N.find((function(e){return e.value===t})),handleSelect:function(e){return r(e.value)},error:null===i||void 0===i?void 0:i.message})}})}),(0,b.jsx)("div",{className:"p-account_field",children:(0,b.jsx)(c.Qr,{name:"wardId",control:h.control,render:function(e){var n=e.field,r=n.onChange,t=n.value,i=e.fieldState.error;return(0,b.jsx)(p.Z,{name:"wardId",placeholder:"---",label:"Ph\u01b0\u1eddng / X\xe3",options:R||[],modifier:["bordered"],required:!0,value:null===R||void 0===R?void 0:R.find((function(e){return e.value===t})),handleSelect:function(e){return r(e.value)},error:null===i||void 0===i?void 0:i.message})}})}),(0,b.jsx)("div",{className:"p-account_field",children:(0,b.jsx)(c.Qr,{name:"address",control:h.control,render:function(e){var n=e.field,r=n.onChange,t=n.value,i=e.fieldState.error;return(0,b.jsx)(d.Z,{name:"address",required:!0,label:"\u0110\u1ecba ch\u1ec9",type:"text",value:t,bordered:!0,onChange:r,error:null===i||void 0===i?void 0:i.message})}})}),(0,b.jsxs)("div",{className:"p-account_button",children:[(0,b.jsx)(l.Z,{variant:"primary",sizes:"h42",loading:T||z,handleClick:h.handleSubmit((function(e){n?Q((0,i.Z)((0,i.Z)({},e),{},{id:n.id})):E(e)})),children:(0,b.jsx)(f.Z.Text,{modifiers:["15x18"],children:"L\u01b0u"})}),(0,b.jsx)(l.Z,{variant:"secondary",sizes:"h42",loading:T||z,handleClick:t,children:(0,b.jsx)(f.Z.Text,{modifiers:["15x18"],children:"H\u1ee7y b\u1ecf"})})]})]}))},C=function(e){var n=e.isModal,r=e.handleSelectAddress,i=(0,u.useState)(!1),a=(0,t.Z)(i,2),c=a[0],o=a[1],d=(0,u.useState)(),p=(0,t.Z)(d,2),v=p[0],x=p[1],g=(0,u.useState)(-1),Z=(0,t.Z)(g,2),j=Z[0],k=Z[1],w=(0,s.useMutation)("getAllShippingAddressAction",_),q=w.mutate,V=w.data,C=w.isLoading,I=(0,s.useMutation)("deleteShippingAddressAction",y,{onSuccess:function(){q()}}).mutate;return(0,m.Z)((function(){q()})),(0,b.jsx)("div",{className:"p-account_shipping",children:c?(0,b.jsx)(N,{defaultValues:v,handleSuccess:function(){o(!1),x(void 0),q(),(0,S.k3)()},handleCancel:function(){o(!1),x(void 0),(0,S.k3)()}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"p-account_shipping_list",children:[C&&(0,b.jsx)(h.Z,{isShow:!0}),null===V||void 0===V?void 0:V.data.map((function(e,r){return(0,b.jsx)("div",{className:(0,S.ZP)("p-account_shipping_item",j===r&&"active"),onClick:function(){return n&&k(r)},children:(0,b.jsxs)("div",{className:"p-account_shipping_wrapper",children:[(0,b.jsxs)(f.Z.Text,{children:["T\xean:"," ",(0,b.jsxs)("strong",{children:[" ",e.name]})]}),(0,b.jsx)("div",{className:"p-account_shipping_line",children:(0,b.jsxs)(f.Z.Text,{children:["S\u0110T:"," ",(0,b.jsx)("strong",{children:e.phone})]})}),(0,b.jsx)("div",{className:"p-account_shipping_line",children:(0,b.jsxs)(f.Z.Text,{children:["\u0110\u1ecba ch\u1ec9:"," ",(0,b.jsxs)("strong",{children:[e.address,","," ",e.ward.name,","," ",e.district.name,","," ",e.city.name]})]})}),(0,b.jsx)("div",{className:"p-account_shipping_edit",children:(0,b.jsx)(l.Z,{iconName:"edit",iconSize:"16",variant:"whiteBorder",handleClick:function(){o(!0),x(e)}})}),(0,b.jsx)("div",{className:"p-account_shipping_delete",children:(0,b.jsx)(l.Z,{iconName:"delete",iconSize:"16",variant:"whiteBorder",handleClick:function(){I([e.id])}})})]})},e.id)}))]}),(0,b.jsxs)("div",{className:"p-account_shipping_button",children:[(0,b.jsx)(l.Z,{variant:n?"secondary":"primary",sizes:"h42",handleClick:function(){return o(!0)},children:(0,b.jsx)(f.Z.Text,{modifiers:["15x18"],children:"Th\xeam m\u1edbi"})}),n&&(0,b.jsx)(l.Z,{variant:"primary",sizes:"h42",handleClick:function(){return r&&V&&j>-1&&r(V.data[j])},children:(0,b.jsx)(f.Z.Text,{modifiers:["15x18"],children:"Ch\u1ecdn"})})]})]})})}},730:function(e,n,r){r.d(n,{DA:function(){return o},ZG:function(){return c},m:function(){return s}});var t=r(5861),i=r(7757),a=r.n(i),u=r(1424),c=function(){var e=(0,t.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("locations/cities/".concat(n));case 2:return r=e.sent,e.abrupt("return",r.data.data.map((function(e){return{label:e.name,value:e.id}})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,t.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("locations/districts/".concat(n));case 2:return r=e.sent,e.abrupt("return",r.data.data.map((function(e){return{label:e.name,value:e.id}})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,t.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("locations/wards/".concat(n));case 2:return r=e.sent,e.abrupt("return",r.data.data.map((function(e){return{label:e.name,value:e.id}})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},8891:function(e,n,r){r.d(n,{A1:function(){return o},g$:function(){return s},qH:function(){return c},uF:function(){return l}});var t=r(5861),i=r(7757),a=r.n(i),u=r(1424),c=function(){var e=(0,t.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("client/orders",{params:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,t.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("client/orders/".concat(n));case 2:return r=e.sent,e.abrupt("return",r.data.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,t.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.post("client/orders/create-order",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,t.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.post("client/orders/create-order-without-auth",n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},951:function(e,n,r){r.d(n,{IT:function(){return l},Jg:function(){return o},b8:function(){return d},dm:function(){return a},gY:function(){return u},oT:function(){return h},tV:function(){return c},yC:function(){return s}});var t=r(8750),i=/(84|0[3|5|7|8|9])+([0-9]{8})\b/,a=t.Ry({email:t.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7"),password:t.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u")}),u=t.Ry({fullName:t.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),phone:t.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(i,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),email:t.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7"),password:t.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u").min(6,"M\u1eadt kh\u1ea9u ph\u1ea3i ch\u1ee9a \xedt nh\u1ea5t 6 k\xed t\u1ef1")}),c=t.Ry({phone:t.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(i,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),address:t.Z_().required("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9"),name:t.Z_().required("Vui l\xf2ng nh\u1eadp t\xean"),cityId:t.Rx().required("Vui l\xf2ng ch\u1ecdn t\u1ec9nh / th\xe0nh ph\u1ed1"),districtId:t.Rx().required("Vui l\xf2ng ch\u1ecdn qu\u1eadn / huy\u1ec7n"),wardId:t.Rx().required("Vui l\xf2ng ch\u1ecdn ph\u01b0\u1eddng / x\xe3")}),s=t.Ry({fullName:t.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),phone:t.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(i,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7")}),o=t.Ry({oldPassword:t.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"),password:t.Z_().required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"),confirmPassword:t.Z_().required("Vui l\xf2ng nh\u1eadp x\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi").oneOf([t.iH("password")],"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng tr\xf9ng kh\u1edbp")}),l=t.Ry({cityId:t.Rx().required("Vui l\xf2ng ch\u1ecdn t\u1ec9nh / th\xe0nh ph\u1ed1"),districtId:t.Rx().required("Vui l\xf2ng ch\u1ecdn qu\u1eadn / huy\u1ec7n"),wardId:t.Rx().required("Vui l\xf2ng ch\u1ecdn ph\u01b0\u1eddng / x\xe3"),address:t.Z_().required("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9"),name:t.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean"),phone:t.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(i,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),email:t.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7")}),d=t.Ry({fullname:t.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),phone:t.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(i,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),email:t.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7")}),h=t.Ry({name:t.Z_().required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),email:t.Z_().required("Vui l\xf2ng nh\u1eadp l\u1ea1i \u0111\u1ecba ch\u1ec9 email").email("Email kh\xf4ng h\u1ee3p l\u1ec7"),subject:t.Z_().required("Vui l\xf2ng nh\u1eadp ch\u1ee7 \u0111\u1ec3"),message:t.Z_().required("Vui l\xf2ng \u0111\u1ec3 l\u1ea1i l\u1eddi nh\u1eafn")})}}]);
//# sourceMappingURL=790.9cececc6.chunk.js.map