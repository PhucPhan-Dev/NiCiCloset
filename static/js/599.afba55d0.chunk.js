"use strict";(self.webpackChunkcarot_shop=self.webpackChunkcarot_shop||[]).push([[599],{7479:function(e,r,n){var i=n(1413),a=n(4925),s=n(2791),t=n(6719),c=n(3934),o=n(184),d=["label","error","placeholder","rows","id","required"],l=function(e,r){var n=e.label,s=e.error,l=e.placeholder,u=e.rows,h=e.id,m=e.required,x=(0,a.Z)(e,d);return(0,o.jsxs)("div",{className:(0,c.ZP)("a-textarea",s&&"error"),children:[n&&(0,o.jsxs)("label",{htmlFor:h,className:"a-input_label",children:[(0,o.jsx)(t.Z.Text,{type:"span",modifiers:["14x16"],children:n}),m&&(0,o.jsx)(t.Z.Text,{type:"span",modifiers:["14x16","ferrariRed"],children:"*"})]}),(0,o.jsx)("div",{className:"a-textarea_wrap",children:(0,o.jsx)("textarea",(0,i.Z)((0,i.Z)({},x),{},{className:"a-textarea_input",placeholder:l,rows:u,ref:r}))}),s&&(0,o.jsx)("span",{className:(0,c.ZP)("a-textarea_error"),children:s})]})},u=(0,s.forwardRef)(l);r.Z=u},5599:function(e,r,n){n.r(r),n.d(r,{default:function(){return O}});var i=n(1413),a=n(5861),s=n(885),t=n(7757),c=n.n(t),o=n(4695),d=n(2791),l=n(9743),u=n(2677),h=n(1134),m=n(1933),x=n(6871),f=n(9085),v=n(7968),p=n(7870),j=n(2228),g=n(7479),Z=n(6719),N=n(8095),_=n(7948),C=n.n(_),y=n(3934),k=n(184),I=function(e){var r=e.isOpen,n=e.handleClose,i=e.variant,a=e.children,s=e.showIconClose,t=e.modifiers;return(0,k.jsx)(C(),{isOpen:r,onRequestClose:n,closeTimeoutMS:250,className:(0,y.ZP)("o-modal",i),ariaHideApp:!1,portalClassName:(0,y.ZP)("o-modal_portal",r&&"open"),overlayClassName:(0,y.ZP)("o-modal_overlay",i),children:(0,k.jsx)("div",{className:"o-modal_main",children:(0,k.jsxs)("div",{className:(0,y.ZP)("o-modal_wrapper",t),children:[n&&s&&(0,k.jsx)("div",{className:"o-modal_close",children:(0,k.jsx)(v.Z,{iconName:"close",variant:"whiteBorder",iconSize:"16",handleClick:n})}),(0,k.jsx)("div",{className:"o-modal_body",children:a})]})})})};I.defaultProps={children:void 0};var T=I,S=n(8825),b=n(2267),w=n(919),q=n(2252),V=n(730),A=n(8891),M=n(1083),P=n(6579),Q=n(6591),z=n(951),O=function(){var e=(0,x.s0)(),r=(0,P.T)(),n=(0,P.C)((function(e){return e.cart})),t=n.checkoutId,_=n.items,C=(0,P.C)((function(e){return e.auth.profile})),I=(0,d.useState)(!1),O=(0,s.Z)(I,2),R=O[0],E=O[1],G=(0,d.useState)(!1),H=(0,s.Z)(G,2),B=H[0],F=H[1],D=(0,h.cI)({resolver:(0,o.X)(z.IT)}),J=D.watch("cityId"),W=D.watch("districtId"),X=(0,d.useMemo)((function(){return _.filter((function(e){return t.includes(e.id)}))}),[t,_]),L=(0,d.useMemo)((function(){return X.reduce((function(e,r){return e+r.price*r.quantity}),0)}),[X]),K=(0,m.useMutation)("getCitiesAction",(function(e){return(0,V.ZG)(e)})),U=K.mutate,Y=K.data,$=(0,m.useMutation)("getDistrictsAction",(function(e){return(0,V.m)(e)})),ee=$.mutate,re=$.data,ne=(0,m.useMutation)("getWardsAction",(function(e){return(0,V.DA)(e)})),ie=ne.mutate,ae=ne.data,se=(0,m.useMutation)("removeItemCartAction",q.ce).mutate,te=(0,m.useMutation)("createOrderAction",C?A.A1:A.uF,{onSuccess:function(){if(F(!0),r((0,M.dv)()),C)se(t);else{var e=localStorage.getItem(Q.g2.NICI_CART),n=e?JSON.parse(e):[];localStorage.setItem(Q.g2.NICI_CART,JSON.stringify(n.filter((function(e){return!t.includes(e.id)}))))}},onError:function(){f.Am.error("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i sau!",{toastId:"orderFail"})}}),ce=te.mutate,oe=te.isLoading,de=function(){var e=(0,a.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.trigger();case 2:e.sent&&(r=D.getValues(),ce((0,i.Z)((0,i.Z)({},r),{},{items:X.map((function(e){return{productId:e.productId,sizeId:e.size.id,colorId:e.color.id,quantity:e.quantity}}))})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.Z)((function(){U(1)})),(0,d.useEffect)((function(){ee(J)}),[ee,D,J]),(0,d.useEffect)((function(){ie(W)}),[ie,D,W]),(0,k.jsxs)(S.Z,{children:[(0,k.jsx)("div",{className:"p-checkout",children:(0,k.jsx)(N.Z,{children:B?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"p-checkout_success",children:(0,k.jsxs)("div",{className:"p-checkout_success-icon",children:[(0,k.jsx)("div",{className:"p-checkout_success-icon_tip"}),(0,k.jsx)("div",{className:"p-checkout_success-icon_long"})]})}),(0,k.jsx)(Z.Z.Text,{modifiers:["mayGreen","700","20x24","center"],children:"\u0110\u1eb7t h\xe0ng th\xe0nh c\xf4ng"}),(0,k.jsx)("div",{className:"p-checkout_button continue",children:(0,k.jsx)(v.Z,{variant:"primary",sizes:"h48",handleClick:function(){return e(Q.PW.HOME)},children:"Ti\u1ebfp t\u1ee5c mua h\xe0ng"})})]}):(0,k.jsx)(h.RV,(0,i.Z)((0,i.Z)({},D),{},{children:(0,k.jsxs)(l.Z,{children:[(0,k.jsxs)(u.Z,{lg:8,className:"p-checkout_address",children:[(0,k.jsxs)("div",{className:"p-checkout_address_title",children:[(0,k.jsx)(Z.Z.Heading,{type:"h3",modifiers:["18x21"],children:"\u0110\u1ecba ch\u1ec9 giao h\xe0ng"}),C&&(0,k.jsx)(v.Z,{iconName:"location",iconSize:"20",handleClick:function(){return E(!0)},children:(0,k.jsx)(Z.Z.Text,{modifiers:["16x18","500"],children:"Ch\u1ecdn \u0111\u1ecba ch\u1ec9 \u0111\xe3 l\u01b0u"})})]}),(0,k.jsx)("div",{className:"p-account_field",children:(0,k.jsx)(h.Qr,{name:"name",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(p.Z,{name:"name",required:!0,label:"T\xean ng\u01b0\u1eddi nh\u1eadn",type:"text",value:i,bordered:!0,onChange:n,error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-account_field",children:(0,k.jsx)(h.Qr,{name:"phone",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(p.Z,{name:"phone",required:!0,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",type:"text",value:i,bordered:!0,onChange:n,error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-account_field",children:(0,k.jsx)(h.Qr,{name:"cityId",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(j.Z,{name:"cityId",placeholder:"---",label:"T\u1ec9nh / Th\xe0nh ph\u1ed1",options:Y||[],modifier:["bordered"],required:!0,value:null===Y||void 0===Y?void 0:Y.find((function(e){return e.value===i})),handleSelect:function(e){return n(e.value)},error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-account_field",children:(0,k.jsx)(h.Qr,{name:"districtId",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(j.Z,{name:"districtId",placeholder:"---",label:"Qu\u1eadn / Huy\u1ec7n",options:re||[],modifier:["bordered"],required:!0,value:null===re||void 0===re?void 0:re.find((function(e){return e.value===i})),handleSelect:function(e){return n(e.value)},error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-account_field",children:(0,k.jsx)(h.Qr,{name:"wardId",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(j.Z,{name:"wardId",placeholder:"---",label:"Ph\u01b0\u1eddng / X\xe3",options:ae||[],modifier:["bordered"],required:!0,value:null===ae||void 0===ae?void 0:ae.find((function(e){return e.value===i})),handleSelect:function(e){return n(e.value)},error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-account_field",children:(0,k.jsx)(h.Qr,{name:"address",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(p.Z,{name:"address",required:!0,label:"\u0110\u1ecba ch\u1ec9",type:"text",value:i,bordered:!0,onChange:n,error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-checkout_line",children:(0,k.jsx)(h.Qr,{name:"email",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(p.Z,{name:"email",required:!0,label:"Email",type:"text",value:i,bordered:!0,onChange:n,error:null===a||void 0===a?void 0:a.message})}})}),(0,k.jsx)("div",{className:"p-checkout_line",children:(0,k.jsx)(h.Qr,{name:"note",control:D.control,render:function(e){var r=e.field,n=r.onChange,i=r.value,a=e.fieldState.error;return(0,k.jsx)(g.Z,{required:!0,name:"note",label:"Ghi ch\xfa",rows:6,value:i,onChange:n,error:null===a||void 0===a?void 0:a.message})}})})]}),(0,k.jsx)(u.Z,{lg:4,className:"p-checkout_info",children:(0,k.jsxs)("div",{className:"p-checkout_total",children:[(0,k.jsx)(Z.Z.Heading,{type:"h3",modifiers:["18x21"],children:"Chi ti\u1ebft \u0111\u01a1n h\xe0ng"}),(0,k.jsxs)("div",{className:"p-checkout_summary",children:[(0,k.jsx)(Z.Z.Text,{modifiers:["13x16","600"],children:"S\u1ea3n ph\u1ea9m"}),(0,k.jsx)(Z.Z.Text,{modifiers:["13x16","600"],children:"Gi\xe1"})]}),(0,k.jsx)("div",{className:"p-checkout_divider"}),X.map((function(e){return(0,k.jsxs)("div",{className:"p-checkout_summary",children:[(0,k.jsxs)("div",{className:"p-checkout_product",children:[(0,k.jsxs)(Z.Z.Text,{modifiers:["13x16","700"],children:[e.name," ","x"," ",e.quantity]}),(0,k.jsxs)(Z.Z.Text,{modifiers:["14x16"],type:"span",children:["Color:"," ",e.color.name]}),(0,k.jsxs)(Z.Z.Text,{modifiers:["14x16"],type:"span",children:[", Size:"," ",e.size.name]})]}),(0,k.jsx)("div",{className:"p-checkout_price",children:(0,k.jsx)(Z.Z.Text,{modifiers:["15x18","600"],children:(0,y.Bw)(e.price*e.quantity,!0,"VN\u0110")})})]},e.id)})),(0,k.jsx)("div",{className:"p-checkout_divider"}),(0,k.jsxs)("div",{className:"p-checkout_summary",children:[(0,k.jsx)(Z.Z.Text,{modifiers:["13x16"],children:"T\u1ed5ng ti\u1ec1n s\u1ea3n ph\u1ea9m"}),(0,k.jsx)(Z.Z.Text,{modifiers:["15x18","600"],children:(0,y.Bw)(L,!0,"VN\u0110")})]}),(0,k.jsx)("div",{className:"p-checkout_divider"}),(0,k.jsxs)("div",{className:"p-checkout_summary",children:[(0,k.jsx)(Z.Z.Text,{modifiers:["13x16"],children:"Gi\u1ea3m gi\xe1"}),(0,k.jsx)(Z.Z.Text,{modifiers:["15x18","600"],children:"0 VN\u0110"})]}),(0,k.jsx)("div",{className:"p-checkout_divider"}),(0,k.jsxs)("div",{className:"p-checkout_summary",children:[(0,k.jsx)(Z.Z.Text,{modifiers:["13x16"],children:"T\u1ed5ng \u0111\u01a1n h\xe0ng"}),(0,k.jsx)(Z.Z.Text,{modifiers:["15x18","600"],children:(0,y.Bw)(L,!0,"VN\u0110")})]}),(0,k.jsx)("div",{className:"p-checkout_button",children:(0,k.jsx)(v.Z,{variant:"primary",loading:oe,sizes:"h48",handleClick:de,children:"\u0110\u1eb7t h\xe0ng"})})]})})]})}))})}),(0,k.jsx)(T,{isOpen:R,variant:"shipping",showIconClose:!0,handleClose:function(){return E(!1)},children:(0,k.jsx)(w.Z,{isModal:!0,handleSelectAddress:function(e){D.setValue("cityId",e.city.id),D.setValue("districtId",e.district.id),D.setValue("wardId",e.ward.id),D.setValue("address",e.address),D.setValue("phone",e.phone),D.setValue("name",e.name),E(!1)}})})]})}}}]);
//# sourceMappingURL=599.afba55d0.chunk.js.map